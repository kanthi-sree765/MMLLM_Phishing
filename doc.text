pipeline {
    agent any
    tools{
        maven 'MAVEN_HOME'
        git 'GIT_HOME'
        jdk 'JAVA_HOME'
    }
    stages {
        stage('git repo & clean') {
            steps {
                //bat "rmdir  /s /q mavenjava"
                bat 'if exist JavaProject rmdir /s /q JavaProject'
                bat "git clone https://github.com/kanthi-sree765/JavaProject"
                bat "mvn clean -f JavaProject/pom.xml"
            }
        }
        stage('install') {
            steps {
                bat "mvn install -f JavaProject/pom.xml"
            }
        }
        stage('test') {
            steps {
                bat "mvn test -f JavaProject/pom.xml"
            }
        }
        stage('package') {
            steps {
                bat "mvn package -f JavaProject/pom.xml"
            }
        }
    }
}

<role rolename="manager-script"/>
<role rolename="manager-gui"/>
<role rolename="manager-status"/>

<user username="admin" password="admin123" roles="manager-script,manager-gui,manager-status"/>

ngrok http 8080


Commands: minikube
docker - - version
minikube start - -driver=docker
minikube status
kubectl get pods -A
minikube dashboard
minikube version
minikube version –client
kubectl create deployment mynginx - -image=nginx
kubectl get deployments
kubectl get pods
kubectl describe pods
kubectl expose deployment mynginx - -type=NodePort - -port=80 - -target-port=80
kubectl scale deployment mynginx - -replicas=4
kubectl get service mynginx
kubectl port-forward svc/mynginx 8081:80
access via Access the app via http://localhost:8081.
minikube tunnel
Retrieve the service URL:
minikube service mynginx –url
kubectl delete deployment mynginx
kubectl delete service mynginx
minikube stop
minikube delete


 
 
 
 
docker pull jasonrivers/nagios:latest
docker run --name nagiosdemo -p 8888:80 jasonrivers/nagios:latest
Open your browser and navigate to:
http://localhost:8888
docker stop nagiosdemo
docker rm nagiosdemo
docker images
docker rmijasonrivers/nagios:latest

   
 

Week 11
Step 1: Configure Webhook in GitHub
1.	Go to your GitHub repository.
2.	Navigate to Settings → Webhooks.
3.	Click “Add webhook”.
4.	In the Payload URL field:
o	Enter the Jenkins webhook URL in the format:
http://<jenkins-server-url>/github-webhook/
Note: If Jenkins is running on localhost, GitHub cannot access it directly.
Use ngrok to expose your local Jenkins to the internet:

o	ngrok.exe http <Jenkins local host:8080>
	Use the generated ngrok URL, e.g.:
	https://wintry-gloryingly-nam.ngrok-free.dev /github-webhook/
5.	Set Content type to:
application/json
6.	Under “Which events would you like to trigger this webhook?”, select:
o	 Just the push event
7.	Click “Add webhook” to save.
________________________________________
 Step 2: Configure Jenkins to Accept GitHub Webhooks
1.	Open Jenkins Dashboard.
2.	Select the job (freestyle or pipeline) you’ve already created.
3.	Click Configure.
4.	Scroll down to the Build Triggers section.
5.	Check the box: ✅GitHub hook trigger for GITScm polling
6.	Click Save.
________________________________________
 Step 3: Test the Setup
1.	Make any code update in your local repo and push it to GitHub.
2.	Once pushed, GitHub will trigger the webhook.
3.	Jenkins will automatically detect the change and start the build pipeline.
________________________________________
outcome
•	You’ve successfully connected GitHub and Jenkins using webhooks.
•	Every time you push code to GitHub, Jenkins will automatically start building your project without manual intervention.

Set-uping the ngrok

How to Install and Use ngrok

Step 1. Download ngrok
https://ngrok.com/download
Download and extract it for your OS (Windows, macOS, or Linux).

Step 2. Connect Your ngrok Account (optional but useful)
After you sign up (free), ngrok gives you an auth token.
•	Then got to  Your Authtoken  click here and copy
•	Go ngrok 	command promt
CREATE AUTHENTICATOR [https://dashboard.ngrok.com/get-started/your-authtoken]
Run this command (replace <your_token> with yours):
ngrok config add-authtoken <your_token>
This ensures stable sessions and more control.

Step 3. Start a Tunnel for Jenkins

Assuming Jenkins runs locally on port 8080:
Now Go ngrok 	command prompt and type below commad
ngrok http 8080
You’ll see output like:

Session Status                online
Forwarding                   https://wintry-gloryingly-nam.ngrok-free.dev -> http://localhost:8080
Copy the HTTPS URL (https://wintry-gloryingly-nam.ngrok-free.dev) — this is your public Jenkins URL for webhooks.
Step 4. Use it in GitHub Webhook

In your GitHub repo → Settings → Webhooks:
•	Payload URL: 		 [paste the url generated by ngrok]

https://wintry-gloryingly-nam.ngrok-free.dev /github-webhook/    [please include this – remaining all default]
Now, whenever you push code, GitHub sends an event to that URL, which ngrok forwards to your local Jenkins.


Setting Up   Jenkins Email Notification Setup (Using Gmail with App Password)
Creation of app password
1. Gmail: Enable App Password (for 2-Step Verification)
i. Go to: https://myaccount.google.com
ii. Enable 2-Step Verification
•	Navigate to:
o	Security → 2-Step Verification
o	Turn it ON
o	Complete the OTP verification process (via phone/email)
iii. Generate App Password for Jenkins
•	Go to:
o	Security → App passwords
•	Select:
o	App: Other (Custom name)
o	Name: Jenkins-Demo
•	Click Generate
•	Copy the 16-digit app password
o	Save it in a secure location (e.g., Notepad)
                 2.  Jenkins Plugin Installation
i. Open Jenkins Dashboard
ii. Navigate to:
•	Manage Jenkins → Manage Plugins
iii. Install Plugin:
•	Search for and install:
o	Email Extension Plugin
________________________________________
3. Configure Jenkins Global Email Settings
i. Go to:
•	Manage Jenkins → Configure System
________________________________________
A. E-mail Notification Section
Field	Value
SMTP Server	smtp.gmail.com
Use SMTP Auth	✅ Enabled
User Name	Your Gmail ID (e.g., archanareddykmit@gmail.com)
Password	Paste the 16-digit App Password
Use SSL	✅ Enabled
SMTP Port	465
Reply-To Address	Your Gmail ID (same as above)
➤ Test Configuration
•	Click: Test configuration by sending test e-mail
•	Provide a valid email address to receive a test mail
•	✅ Should receive email from Jenkins
________________________________________
B. Extended E-mail Notification Section
Field	Value
SMTP Server	smtp.gmail.com
SMTP Port	465
Use SSL	✅ Enabled
Credentials	Add Gmail ID and App Password as Jenkins credentials
Default Content Type	text/html or leave default
Default Recipients	Leave empty or provide default emails
Triggers	Select as per needs (e.g., Failure)
________________________________________
4.  Configure Email Notifications for a Jenkins Job
i. Go to:
•	Jenkins → Select a Job → Configure
________________________________________
ii. In the Post-build Actions section:
•	Click: Add post-build action → Editable Email Notification
A. Fill in the fields:
Field	Value
Project Recipient List	Add recipient email addresses (comma-separated)
Content Type	Default (text/plain) or text/html
Triggers	Select events (e.g., Failure, Success, etc.)
Attachments	(Optional) Add logs, reports, etc.
________________________________________
iii. Click Save
________________________________________
 Now your Jenkins job is set up to send email notifications based on the build status!
 	________________________________________
Takeaway :
Students learned how to integrate Jenkins with GitHub using webhooks to automate build triggers and configure email notifications to monitor build success or failure effectively.
Def sub
$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!
Def con
$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS: Check console output at $BUILD_URL

DockerFile
FROM nginx:alpine
COPY index.html /usr/share/nginx/html

https://myaccount.google.com/apppasswords?pli=1&rapt=AEjHL4NOibaatx3KcQGNXKp6gw3eutTTSxZxo5e6G_2c289wI3u8Xm3aadAqALYu4M518nQHkdZ9j4dQOs-KKdgw10azdQBG_OyoPssnIUYdbPQGzxlhYRY

PART 1: Deploy index.html using EC2
Step 1: Login to AWS Academy
Go to the invitation email from AWS Academy.
Click Start → it will open AWS Academy portal.
Select Student Login.
Enter your email and password.
Click Modules, scroll down, and select Launch AWS Academy Lab.
Click Start Lab → wait until the AWS icon turns green.
✅ You are now in the AWS Academy environment.
Step 2: Launch EC2 Instance
Click AWS → then EC2 → Launch Instance.
Stage 1: Name → Give your instance a name, e.g., ubuntu.
Stage 2: Select AMI → Choose Ubuntu Server (free tier eligible).
Stage 3: Architecture → 64-bit.
Stage 4: Instance Type → t2.micro (1 CPU, 1 GB RAM, free tier).
Stage 5: Key Pair → Create a new key pair → download .pem file → save it in a folder, e.g., AWS on your desktop.
Stage 6: Network Settings → Create security group → allow HTTP (80) and HTTPS (443).
Stage 7: Storage → default 8GB.
Stage 8: Launch Instance.
✅ Wait until your instance shows running and green.
Step 3: Connect to EC2
Tick the checkbox next to your instance → click Connect.
Copy the SSH command from AWS (something like ssh -i "key.pem" ubuntu@public-ip).
Open PowerShell or Git Bash on your local machine.
Navigate to the folder where .pem is saved:
cd D:\AWS
Run the SSH command to connect:
ssh -i "yourkey.pem" ubuntu@<public-ip>
✅ Now you are connected to your EC2 instance via SSH.
Step 4: Install required software
Run these commands one by one on your EC2 terminal:
sudo apt update          # Update all packages
sudo apt install docker.io -y
sudo apt install git -y
sudo apt install nano -y
Step 5: Create your web application
On your local machine, create a folder, e.g., Example.
Inside, create index.html file with basic content.
Open Git Bash in that folder:
git init
git add .
git commit -m "first commit"
git branch -M main
git remote add origin <your-github-repo-https-url>
git push -u origin main
✅ Now your index.html is on GitHub.
Step 6: Deploy Docker container
On your EC2 terminal:
git clone <your-github-repo-https-url>
cd Example
nano Dockerfile
Inside Dockerfile, write:
FROM nginx
COPY index.html /usr/share/nginx/html
Press Ctrl+O → Enter to save, then Ctrl+X to exit.
Build Docker image:
sudo docker build -t mywebapp .
Run the container on port 80:
sudo docker run -d -p 80:80 mywebapp
Copy Public IPv4 of EC2 → paste in browser → you should see your index.html.
Step 7: Stop & Terminate
Stop container:
sudo docker ps       # get container-id
sudo docker stop <container-id>
Terminate EC2 instance → go to Instances → Instance State → Terminate.
Click End Lab.

Maven Web Project Deployment
Step 1: Launch EC2 Instance
Go to AWS Academy Learner Lab → Click Start Lab.
Click AWS → EC2 → Launch Instance.
Instance Setup:
Name: Give any name (e.g., MavenWebApp).
AMI: Select Ubuntu Server (free tier eligible).
Architecture: 64-bit.
Instance Type: t2.micro (1 CPU, 1 GB RAM).
Key Pair:
Create a new key pair, download .pem file, save in a secure folder (e.g., AWS folder on Desktop).
Network/Security Settings:
Create a Security Group.
Check HTTP and HTTPS (or all checkboxes if required).
Storage: Keep default 8 GB.
Click Launch Instance.
✅ Wait until your instance is running and you see 2 tests passed (if AWS Academy Lab has automated checks).
Step 2: Connect to EC2 Instance
Tick/select your instance → Click Connect → SSH.
Copy the SSH command from AWS console.
Open terminal (PowerShell / Git Bash / Ubuntu).
Navigate to the folder where your .pem key is saved:
cd <path-to-pem-folder>
# Example:
cd D:\AWS
Run the SSH command from AWS console:
ssh -i "your-key.pem" ubuntu@<public-ip>
Now you are inside the EC2 terminal.
Step 3: Clone Maven Project from GitHub
Copy the HTTPS URL of your Maven Web Project repository.
On EC2 terminal, run:
git clone <repo-https-url>
cd <repo-folder>
# Example:
git clone https://github.com/username/maven-web-app.git
cd maven-web-app
Step 4: Build Docker Image
Create a Dockerfile inside the project folder:
nano Dockerfile
Type the following in Dockerfile (example for a Maven web app with Tomcat):
FROM tomcat:9.0
COPY target/*.war /usr/local/tomcat/webapps/
Save and exit nano:
Ctrl + O → Enter → Ctrl + X
Build the Docker image:
sudo docker build -t mymavenapp .
Run the container and map port 9090:
sudo docker run -d -p 9090:8080 mymavenapp
Step 5: Access Maven Web App
Copy your Public IPv4 from EC2 instance details.
Open a browser and type:
http://<public-ip>:9090
# Example:
http://3.21.45.67:9090
If the page does not load, update Security Group:
Go to EC2 → Security Groups → Edit Inbound Rules
Add rule: Custom TCP, port 9090, source 0.0.0.0/0 → Save
Refresh the browser → Your Maven web app should appear.
Step 6: Stop Container & Terminate Instance
Stop running Docker container:
sudo docker ps      # Lists running containers
sudo docker stop <container-id>
Terminate EC2 instance:
Go to EC2 → Instances → Select your instance → Instance State → Terminate Instance
Click End Lab in AWS Academy Learner Lab.
